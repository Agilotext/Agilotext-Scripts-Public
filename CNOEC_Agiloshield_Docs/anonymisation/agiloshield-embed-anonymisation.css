  :root {
    --agilo-primary: var(--color--blue, #174a96);
    --agilo-primary-soft: color-mix(in srgb, var(--color--blue, #174a96) 12%, transparent);
    --agilo-text: var(--color--gris_fonc√©, #020202);
    --agilo-text-secondary: var(--color--gris, #525252);
    --agilo-surface: var(--color--white, #ffffff);
    --agilo-surface-2: var(--color--blanc_gris, #f8f9fa);
    --agilo-border: rgba(52, 58, 64, 0.12);
    --agilo-success: var(--color--vert, #1c661a);
    --agilo-error: var(--color--rouge, #a82633);

    --space-1: 8px;
    --space-2: 16px;
    --space-3: 24px;
    --space-4: 32px;
    --radius: 16px;
    --ring: color-mix(in srgb, var(--agilo-primary) 28%, transparent);
    --shadow-soft: 0 8px 28px rgba(23, 74, 150, 0.1);
  }

  form[ms-code-anonymisation="form"] {
    max-width: 1160px;
    margin: 0 auto;
    width: 100%;
    color: var(--agilo-text);
    font-family: "Inter", "SF Pro Text", "Segoe UI", sans-serif;
    box-sizing: border-box;
  }
  form[ms-code-anonymisation="form"] *,
  form[ms-code-anonymisation="form"] *::before,
  form[ms-code-anonymisation="form"] *::after {
    box-sizing: border-box;
  }
  form[ms-code-anonymisation="form"] h1,
  form[ms-code-anonymisation="form"] h2,
  form[ms-code-anonymisation="form"] h3,
  form[ms-code-anonymisation="form"] h4,
  form[ms-code-anonymisation="form"] h5,
  form[ms-code-anonymisation="form"] p { margin: 0; }

  .agf-shell {
    background: var(--agilo-surface);
    border-radius: var(--radius);
    box-shadow: var(--shadow-soft);
    padding: var(--space-4);
    display: grid;
    gap: var(--space-2);
  }

  .agf-head {
    display: grid;
    gap: var(--space-1);
    padding: 0;
  }
  .agf-head h2 { font-size: 1.35rem; line-height: 1.25; font-weight: 600; letter-spacing: -0.01em; }
  .agf-head p { color: var(--agilo-text-secondary); font-size: 0.9375rem; }

  .agf-tabs {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: var(--space-1);
  }
  .agf-tab {
    border: 1px solid var(--agilo-border);
    border-radius: 12px;
    background: var(--agilo-surface-2);
    color: var(--agilo-text-secondary);
    padding: var(--space-2);
    text-align: left;
    cursor: pointer;
    display: grid;
    gap: var(--space-1);
    transition: border-color 150ms ease, box-shadow 150ms ease;
  }
  .agf-tab strong { font-size: 1rem; font-weight: 600; color: var(--agilo-text); }
  .agf-tab span { font-size: 0.8125rem; color: var(--agilo-text-secondary); }
  .agf-tab[aria-selected="true"] {
    background: var(--agilo-surface);
    border-color: var(--agilo-primary);
    box-shadow: 0 0 0 2px color-mix(in srgb, var(--agilo-primary) 18%, transparent);
  }

  .agf-grid {
    display: grid;
    grid-template-columns: minmax(0, 1fr) 280px;
    gap: var(--space-2);
  }

  .agf-main,
  .agf-side {
    border-radius: var(--radius);
    background: var(--agilo-surface-2);
    padding: var(--space-3);
  }
  .agf-main { min-height: 560px; }
  .agf-side { display: grid; gap: var(--space-3); align-content: start; }

  .agf-panel { display: none; gap: var(--space-2); }
  .agf-panel[aria-hidden="false"] { display: grid; }

  .agf-section-title { font-size: 1rem; font-weight: 600; margin-bottom: var(--space-1); }

  .agf-dropzone {
    border: 1.5px dashed var(--agilo-border);
    border-radius: 12px;
    background: var(--agilo-surface-2);
    padding: var(--space-3) var(--space-2);
    text-align: center;
    cursor: pointer;
    transition: border-color 150ms ease, box-shadow 150ms ease;
    outline: none;
  }
  .agf-dropzone:hover,
  .agf-dropzone:focus-visible,
  .agf-dropzone.is-dragover {
    border-color: var(--agilo-primary);
    box-shadow: 0 0 0 4px var(--ring);
  }
  .agf-dropzone h4 { font-size: 1rem; font-weight: 600; }
  .agf-dropzone p { margin-top: var(--space-1); font-size: 0.8125rem; color: var(--agilo-text-secondary); }
  .agf-dropzone .agf-formats-explicit { margin-top: var(--space-1); font-size: 0.75rem; color: var(--agilo-text-secondary); opacity: 0.9; }
  #agfApiLink { color: var(--agilo-text-secondary); text-decoration: none; font-size: 0.75rem; }
  #agfApiLink:hover { text-decoration: underline; color: var(--agilo-primary); }

  #agfFileInput { display: none; }

  .agf-list {
    border: 1px solid var(--agilo-border);
    border-radius: 12px;
    background: var(--agilo-surface);
    min-height: 220px;
    padding: var(--space-2);
    display: grid;
    gap: var(--space-1);
    align-content: start;
  }
  .agf-empty { margin: auto; text-align: center; color: var(--agilo-text-secondary); font-size: 0.875rem; }

  .agf-file {
    border: 1px solid var(--agilo-border);
    border-radius: 10px;
    background: var(--agilo-surface);
    padding: var(--space-1) var(--space-2);
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto;
    align-items: center;
    gap: var(--space-2);
  }
  .agf-file-name { font-size: 0.9375rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .agf-file-meta { margin-top: 2px; color: var(--agilo-text-secondary); font-size: 0.8125rem; }
  .agf-remove {
    border: none;
    border-radius: 8px;
    background: transparent;
    color: var(--agilo-text-secondary);
    font-size: 0.8125rem;
    font-weight: 500;
    padding: 6px 12px;
    cursor: pointer;
  }
  .agf-remove:hover { color: var(--agilo-error); }

  .agf-row,
  .agf-cols { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: var(--space-2); }

  .agf-textbox {
    border: 1px solid var(--agilo-border);
    border-radius: 12px;
    background: var(--agilo-surface);
    padding: var(--space-2);
    display: grid;
    gap: var(--space-1);
    min-height: 340px;
  }
  .agf-textbox label { font-size: 0.875rem; font-weight: 600; }
  .agf-textarea {
    width: 100%; min-height: 280px; border: 1px solid var(--agilo-border); border-radius: 10px;
    padding: var(--space-2); font-size: 0.9375rem; line-height: 1.5; resize: vertical; background: var(--agilo-surface);
    color: var(--agilo-text);
  }
  .agf-row--text { min-height: 340px; }
  .agf-textbox--flex { display: flex; flex-direction: column; gap: var(--space-1); min-height: 0; }
  .agf-textbox-head { display: flex; justify-content: space-between; align-items: flex-start; gap: var(--space-2); }
  .agf-textbox-body { flex: 1; overflow: hidden; display: flex; min-height: 0; }
  .agf-textbox-body .agf-textarea { min-height: 260px; flex: 1; }
  .agf-textbox-label { font-size: 0.875rem; font-weight: 600; margin-bottom: var(--space-1); }
  .agf-btn-link--small { font-size: 0.75rem; padding: 0; min-height: auto; }
  .agf-icon-trash, .agf-icon-copy { display: inline-block; width: 14px; height: 14px; vertical-align: -2px; margin-right: 4px; }
  .agf-icon-trash { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6'/%3E%3Cpath d='M3 6h18'/%3E%3Cpath d='M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'/%3E%3C/svg%3E") no-repeat center; }
  .agf-icon-copy { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect width='14' height='14' x='8' y='8' rx='2' ry='2'/%3E%3Cpath d='M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2'/%3E%3C/svg%3E") no-repeat center; }
  .agf-output-wrap {
    flex: 1; min-height: 260px; border-radius: 12px;
    border: 1px solid color-mix(in srgb, var(--agilo-primary) 28%, transparent);
    background: color-mix(in srgb, var(--agilo-primary) 5%, var(--agilo-surface));
    padding: var(--space-2); padding-top: 36px; position: relative; overflow-y: auto;
  }
  .agf-output-copy {
    position: absolute; top: 10px; right: 12px; z-index: 10;
    height: 28px; padding: 0 10px; font-size: 0.75rem; font-weight: 500;
    border-radius: 6px; border: none; background: var(--agilo-primary); color: var(--agilo-surface);
    cursor: pointer; display: inline-flex; align-items: center; gap: 6px;
  }
  .agf-output-copy:hover { background: color-mix(in srgb, var(--agilo-primary) 88%, var(--agilo-text-secondary)); }
  .agf-text-output {
    font-size: 0.875rem; line-height: 1.6; color: var(--agilo-text); white-space: pre-wrap; word-break: break-word;
  }
  .agf-text-output.agf-text-output--loading { opacity: 0.85; }
  .agf-output-stats {
    margin-top: var(--space-2);
    border-top: 1px solid color-mix(in srgb, var(--agilo-primary) 20%, transparent);
    padding-top: 10px;
    display: grid;
    gap: 8px;
  }
  .agf-output-summary { font-size: 0.75rem; color: var(--agilo-text-secondary); }
  .agf-output-entities { display: flex; flex-wrap: wrap; gap: 6px; }
  .agf-output-entity-chip {
    border-radius: 999px;
    border: 1px solid color-mix(in srgb, var(--agilo-primary) 28%, transparent);
    background: color-mix(in srgb, var(--agilo-primary) 8%, var(--agilo-surface));
    color: var(--agilo-text);
    font-size: 0.75rem;
    line-height: 1;
    padding: 5px 8px;
  }
  .agf-tag {
    border-radius: 5px;
    padding: 2px 6px;
    font-size: 0.8125rem;
    font-weight: 600;
    border: 1px solid color-mix(in srgb, var(--agilo-primary) 26%, transparent);
  }
  .agf-tag-PR { background: #fef9c3; color: #422006; }
  .agf-tag-ADR { background: #dbeafe; color: #1e3a8a; }
  .agf-tag-POST { background: #d1fae5; color: #065f46; }
  .agf-tag-LOC { background: #e9d5ff; color: #5b21b6; }
  .agf-tag-MAIL { background: #ffedd5; color: #9a3412; }
  .agf-tag-PHON { background: #ccfbf1; color: #0f766e; }
  .agf-tag-SIREN, .agf-tag-SIRET { background: #fce7f3; color: #831843; }
  .agf-tag-OTHER { background: #f3f4f6; color: #374151; }

  .agf-lock-block {
    border: 1.5px dashed var(--agilo-border);
    border-radius: 12px;
    background: var(--agilo-surface-2);
    min-height: 380px;
    display: grid;
    place-items: center;
    gap: var(--space-2);
    text-align: center;
    padding: var(--space-3);
  }
  .agf-lock-icon { width: 64px; height: 64px; color: var(--agilo-primary); }
  .agf-lock-title { font-size: 1rem; font-weight: 600; }
  .agf-lock-text { color: var(--agilo-text-secondary); font-size: 0.875rem; max-width: 480px; }

  .agf-status {
    display: none; align-items: center; gap: var(--space-1); border-radius: 10px;
    padding: var(--space-2); font-size: 0.9375rem;
  }
  .agf-status.is-visible { display: inline-flex; }
  .agf-status[data-kind="loading"] { color: var(--agilo-primary); background: var(--agilo-primary-soft); }
  .agf-status[data-kind="success"] { color: var(--agilo-success); background: color-mix(in srgb, var(--agilo-success) 10%, transparent); }
  .agf-status[data-kind="error"] { color: var(--agilo-error); background: color-mix(in srgb, var(--agilo-error) 10%, transparent); }
  .agf-spinner { width: 16px; height: 16px; border: 2px solid currentColor; border-right-color: transparent; border-radius: 50%; animation: agf-spin .7s linear infinite; }
  @keyframes agf-spin { to { transform: rotate(360deg); } }

  .agf-actions { display: flex; gap: var(--space-2); flex-wrap: wrap; align-items: center; }
  .agf-btn-primary,
  .agf-btn-secondary,
  .agf-btn-link { min-height: 44px; border-radius: 10px; font-size: 0.9375rem; font-weight: 600; padding: 0 24px; cursor: pointer; transition: background-color 160ms ease, color 160ms ease, border-color 160ms ease, box-shadow 160ms ease; }
  .agf-btn-primary { border: none; background: var(--agilo-primary); color: var(--agilo-surface); }
  .agf-btn-primary:hover:not(:disabled) { background: color-mix(in srgb, var(--agilo-primary) 90%, var(--agilo-text-secondary)); }
  .agf-btn-primary:disabled { opacity: .5; cursor: not-allowed; }
  .agf-btn-primary:focus-visible,
  .agf-btn-secondary:focus-visible,
  .agf-btn-link:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 28%, transparent);
  }
  .agf-btn-secondary { border: none; background: transparent; color: var(--agilo-text-secondary); text-decoration: underline; text-underline-offset: 2px; }
  .agf-btn-secondary:hover { color: var(--agilo-primary); }
  .agf-btn-link { border: none; background: transparent; color: var(--agilo-text-secondary); text-decoration: underline; text-underline-offset: 2px; }
  .agf-btn-link:hover { color: var(--agilo-primary); }

  .agf-download { display: none; color: var(--agilo-primary); text-decoration: underline; text-underline-offset: 2px; font-size: 0.9375rem; font-weight: 500; padding: 0; }
  .agf-download.is-visible { display: inline-flex; }

  .agf-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: .04em; color: var(--agilo-text-secondary); }
  .agf-group { display: grid; gap: var(--space-1); }
  .agf-radio-line,
  .agf-item-btn {
    border: 1px solid var(--agilo-border);
    border-radius: 10px;
    background: var(--agilo-surface);
    min-height: 44px;
    padding: var(--space-1) var(--space-2);
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: 0.875rem;
  }
  .agf-radio-line input[type="radio"] { accent-color: var(--agilo-primary); }
  .agf-radio-line:focus-within {
    border-color: color-mix(in srgb, var(--agilo-primary) 40%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 18%, transparent);
  }
  .agf-item-btn { width: 100%; justify-content: space-between; cursor: pointer; color: var(--agilo-text); }
  .agf-item-btn:hover { border-color: color-mix(in srgb, var(--agilo-primary) 32%, transparent); }
  .agf-item-btn:focus-visible {
    outline: none;
    border-color: color-mix(in srgb, var(--agilo-primary) 38%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 18%, transparent);
  }
  .agf-item-btn.is-active { border-color: color-mix(in srgb, var(--agilo-primary) 40%, transparent); background: color-mix(in srgb, var(--agilo-primary) 7%, var(--agilo-surface)); }
  .agf-chip {
    font-size: 0.6875rem; border: 1px solid var(--agilo-border); border-radius: 999px;
    padding: 2px 8px; color: var(--agilo-text-secondary); background: var(--agilo-surface-2);
  }
  .agf-item-btn--count { position: relative; padding-right: 48px; }
  .agf-chip-count {
    position: absolute;
    top: -8px;
    right: -8px;
    min-width: 22px;
    height: 22px;
    border-radius: 999px;
    background: var(--agilo-primary);
    color: var(--agilo-surface);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6875rem;
    font-weight: 700;
    border: 2px solid var(--agilo-surface);
  }

  .agf-small { font-size: 0.8125rem; color: var(--agilo-text-secondary); }

  .agf-modal-overlay {
    position: fixed; inset: 0; display: none; align-items: center; justify-content: center;
    background: rgba(23, 74, 150, 0.2); z-index: 9999; padding: var(--space-2);
    backdrop-filter: blur(2px);
  }
  .agf-modal-overlay.is-open { display: flex; }
  .agf-modal {
    width: min(560px, 100%); max-height: min(85vh, 680px); overflow: auto;
    background: var(--agilo-surface); border-radius: var(--radius);
    box-shadow: 0 22px 48px rgba(23, 74, 150, 0.2);
    padding: clamp(20px, 3vw, 30px);
    display: grid;
    gap: 18px;
  }
  #agfModalTypesWrap .agf-modal { width: min(980px, 100%); max-height: min(88vh, 760px); }
  .agf-modal-head { display: flex; justify-content: space-between; align-items: start; gap: 14px; }
  .agf-modal-title { font-size: 1.375rem; font-weight: 600; line-height: 1.2; letter-spacing: -0.01em; }
  .agf-modal-subtitle { margin-top: 6px; font-size: 0.875rem; line-height: 1.45; color: var(--agilo-text-secondary); max-width: 72ch; }
  .agf-close {
    border: 1px solid transparent;
    background: transparent;
    font-size: 1.5rem;
    line-height: 1;
    color: var(--agilo-text-secondary);
    cursor: pointer;
    padding: 2px 8px;
    border-radius: 8px;
    transition: background-color 160ms ease, color 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
  }
  .agf-close:hover { color: var(--agilo-text); }
  .agf-close:focus-visible {
    outline: none;
    border-color: color-mix(in srgb, var(--agilo-primary) 38%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 18%, transparent);
  }

  .agf-type-grid { display: grid; gap: 14px; }
  .agf-type-card {
    border: 1px solid var(--agilo-border);
    border-radius: 14px;
    padding: 14px;
    display: grid;
    gap: 12px;
    background: var(--agilo-surface);
  }
  .agf-type-card-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-1);
  }
  .agf-type-card h5 {
    font-size: 0.8125rem;
    text-transform: uppercase;
    letter-spacing: .04em;
    color: var(--agilo-text-secondary);
  }
  .agf-type-card-count {
    border-radius: 999px;
    font-size: 0.6875rem;
    border: 1px solid var(--agilo-border);
    padding: 2px 8px;
    color: var(--agilo-text-secondary);
    background: var(--agilo-surface-2);
  }
  .agf-checkboxes { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px; }
  .agf-entity-option {
    border: 1px solid var(--agilo-border);
    border-radius: 10px;
    min-height: 44px;
    padding: 10px;
    font-size: 0.875rem;
    display: flex;
    gap: 8px;
    align-items: center;
    background: var(--agilo-surface);
    cursor: pointer;
    transition: border-color 160ms ease, box-shadow 160ms ease, background-color 160ms ease;
  }
  .agf-entity-option:hover { border-color: color-mix(in srgb, var(--agilo-primary) 30%, transparent); }
  .agf-entity-option:focus-within {
    border-color: color-mix(in srgb, var(--agilo-primary) 40%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 16%, transparent);
  }
  .agf-entity-option input { accent-color: var(--agilo-primary); margin: 0; }
  .agf-entity-option input:checked + .agf-entity-code {
    background: color-mix(in srgb, var(--agilo-primary) 16%, var(--agilo-surface));
    border-color: color-mix(in srgb, var(--agilo-primary) 42%, transparent);
  }
  .agf-entity-code {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 999px;
    border: 1px solid color-mix(in srgb, var(--agilo-primary) 30%, transparent);
    background: color-mix(in srgb, var(--agilo-primary) 8%, var(--agilo-surface));
    color: color-mix(in srgb, var(--agilo-primary) 80%, var(--agilo-text));
    font-size: 0.6875rem;
    font-weight: 700;
    line-height: 1;
    padding: 4px 8px;
    min-width: 38px;
  }
  .agf-entity-name { color: var(--agilo-text); }
  .agf-entity-option.is-future .agf-entity-name { color: var(--agilo-text-secondary); }
  .agf-entity-option.is-future .agf-entity-code { border-style: dashed; }

  .agf-modal-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-2);
    flex-wrap: wrap;
    border-top: 1px solid color-mix(in srgb, var(--agilo-border) 80%, transparent);
    padding-top: 14px;
  }
  .agf-textbox--compact { min-height: auto; }
  .agf-textarea--modal { min-height: 200px; }
  .agf-actions--end { justify-content: flex-end; }
  .agf-modal--wide { width: min(900px, 100%); max-height: min(88vh, 760px); }
  .agf-pseudo-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 18px; }
  .agf-pseudo-card {
    border: 1px solid var(--agilo-border);
    border-radius: 14px;
    background: var(--agilo-surface);
    padding: 14px;
    display: grid;
    gap: 12px;
  }
  .agf-pseudo-title { font-size: 0.875rem; font-weight: 600; color: var(--agilo-text); }
  .agf-pseudo-desc { font-size: 0.75rem; color: var(--agilo-text-secondary); }
  .agf-option-line {
    border: 1px solid var(--agilo-border);
    border-radius: 10px;
    min-height: 42px;
    padding: 8px 10px;
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--agilo-surface);
    transition: border-color 160ms ease, box-shadow 160ms ease, background-color 160ms ease;
  }
  .agf-option-line:hover { border-color: color-mix(in srgb, var(--agilo-primary) 28%, transparent); }
  .agf-option-line:focus-within {
    border-color: color-mix(in srgb, var(--agilo-primary) 38%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 16%, transparent);
  }
  .agf-option-line input[type="radio"],
  .agf-option-line input[type="checkbox"] { accent-color: var(--agilo-primary); }
  .agf-option-line label { font-size: 0.8125rem; font-weight: 500; cursor: pointer; }
  .agf-select-line {
    display: grid;
    gap: 4px;
  }
  .agf-select-line label { font-size: 0.75rem; color: var(--agilo-text-secondary); }
  .agf-select-line select {
    min-height: 38px;
    border: 1px solid var(--agilo-border);
    border-radius: 8px;
    background: var(--agilo-surface);
    color: var(--agilo-text);
    padding: 0 10px;
    transition: border-color 160ms ease, box-shadow 160ms ease;
  }
  .agf-select-line select:focus-visible {
    outline: none;
    border-color: color-mix(in srgb, var(--agilo-primary) 38%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 16%, transparent);
  }
  .agf-inc-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 18px; }
  .agf-inc-card {
    border: 1px solid var(--agilo-border);
    border-radius: 14px;
    padding: 14px;
    background: var(--agilo-surface);
    display: grid;
    gap: 12px;
  }
  .agf-inc-card h4 { font-size: 0.9375rem; font-weight: 600; }
  .agf-inc-card p { font-size: 0.75rem; color: var(--agilo-text-secondary); }
  .agf-inc-card--include h4 { color: color-mix(in srgb, var(--agilo-success) 80%, var(--agilo-text)); }
  .agf-inc-card--exclude h4 { color: color-mix(in srgb, var(--agilo-error) 80%, var(--agilo-text)); }
  .agf-inc-add { display: flex; gap: 8px; align-items: center; }
  .agf-inc-add input {
    flex: 1;
    min-height: 36px;
    border: 1px solid var(--agilo-border);
    border-radius: 8px;
    background: var(--agilo-surface);
    color: var(--agilo-text);
    padding: 0 10px;
    font-size: 0.8125rem;
    transition: border-color 160ms ease, box-shadow 160ms ease;
  }
  .agf-inc-add input:focus-visible {
    outline: none;
    border-color: color-mix(in srgb, var(--agilo-primary) 40%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 16%, transparent);
  }
  .agf-inc-add button {
    min-height: 36px;
    border-radius: 8px;
    border: 1px solid var(--agilo-border);
    background: var(--agilo-surface);
    color: var(--agilo-text);
    padding: 0 12px;
    font-size: 0.8125rem;
    font-weight: 600;
    cursor: pointer;
    transition: border-color 160ms ease, color 160ms ease, box-shadow 160ms ease, background-color 160ms ease;
  }
  .agf-inc-add button:hover { border-color: color-mix(in srgb, var(--agilo-primary) 45%, transparent); color: var(--agilo-primary); }
  .agf-inc-add button:focus-visible {
    outline: none;
    border-color: color-mix(in srgb, var(--agilo-primary) 40%, transparent);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--agilo-primary) 16%, transparent);
  }
  .agf-term-list {
    border: 1px solid var(--agilo-border);
    border-radius: 10px;
    background: var(--agilo-surface-2);
    min-height: 120px;
    max-height: 220px;
    overflow-y: auto;
    padding: 8px;
    display: grid;
    gap: 6px;
    align-content: start;
  }
  .agf-term-empty { font-size: 0.75rem; color: var(--agilo-text-secondary); text-align: center; padding: 10px 0; }
  .agf-term-item {
    border: 1px solid var(--agilo-border);
    border-radius: 8px;
    background: var(--agilo-surface);
    padding: 6px 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
  }
  .agf-term-item span { font-size: 0.8125rem; color: var(--agilo-text); word-break: break-word; }
  .agf-term-remove {
    border: none;
    background: transparent;
    color: var(--agilo-text-secondary);
    font-size: 0.75rem;
    cursor: pointer;
    padding: 0;
  }
  .agf-term-remove:hover { color: var(--agilo-error); }
  .agf-term-remove:focus-visible {
    outline: none;
    color: var(--agilo-error);
    text-decoration: underline;
    text-underline-offset: 2px;
  }
  .agf-hidden-field { display: none; }

  .agf-manual-auth { display: grid; gap: var(--space-1); }
  .agf-manual-auth.is-collapsed .agf-manual-auth-fields { display: none; }
  .agf-manual-auth-toggle { border: none; background: none; color: var(--agilo-primary); font-size: 0.8125rem; cursor: pointer; padding: 0; text-decoration: underline; text-underline-offset: 2px; }
  .agf-manual-auth-toggle:hover { color: var(--agilo-text); }
  .agf-manual-auth-fields { display: grid; gap: var(--space-1); }
  .agf-manual-auth label { font-size: 0.75rem; color: var(--agilo-text-secondary); display: block; margin-bottom: 2px; }
  .agf-manual-auth input { width: 100%; padding: 6px 8px; font-size: 0.8125rem; border: 1px solid var(--agilo-border); border-radius: 6px; }
  .agf-manual-auth select { width: 100%; padding: 6px 8px; font-size: 0.8125rem; border: 1px solid var(--agilo-border); border-radius: 6px; background: var(--agilo-surface); }

  @media (max-width: 980px) {
    .agf-grid { grid-template-columns: 1fr; }
    .agf-side { order: -1; }
  }
  @media (max-width: 760px) {
    .agf-tabs,
    .agf-row,
    .agf-cols,
    .agf-checkboxes,
    .agf-pseudo-grid,
    .agf-inc-grid { grid-template-columns: 1fr; }
    .agf-actions { flex-direction: column; align-items: stretch; }
    .agf-btn-primary,
    .agf-download { width: 100%; justify-content: center; text-align: center; }
  }
